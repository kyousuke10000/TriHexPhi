# 🔱 6AI協働インフラ設計書（GitHub統合）

**作成**: Cursor（螺律統合）  
**日付**: 2025-10-27  
**目的**: 六大将軍の完璧な協働体制を構築  
**優先度**: 🔴 最高（Band A実装の前提）

---

## 🎯 課題認識

### 現状の問題
- ❌ 各AIへのタスク送付が手動（しりゅうがコピペ）
- ❌ 回答の収集が手動（各プラットフォームから回収）
- ❌ 統合レポート作成が手動（しりゅう → GPT-5 → Cursor）
- ❌ 共通情報（TRIHEXPHI.md、進行状況）の同期が不明確
- ❌ 6AI間のレビュー・合議プロセスが不在

### 理想の姿
- ✅ タスク送付：GitHub Discussionsに投稿 → 全AIが自動参照
- ✅ 回答収集：各AIがMarkdownファイルで回答 → GitHub Actionsで自動収集
- ✅ 統合レポート：Cursorが自動生成 → GPT-5がレビュー
- ✅ 共通情報：GitHubリポジトリが唯一の真実（Single Source of Truth）
- ✅ 6AI合議：GitHub Discussionsでラウンドごとにレビュー

---

## 🏗️ アーキテクチャ概要

```
┌─────────────────────────────────────────────────────────┐
│                    しりゅうCEO（統治者）                    │
└─────────────┬───────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────────────────┐
│           GitHub Repository (TriHexPhi)                 │
│  ┌────────────────────────────────────────────────┐    │
│  │  📤 Round3_全AI送付用/ (タスク送付)             │    │
│  │  ├── Claude_倫理ゲート設計依頼.md                │    │
│  │  ├── Gemini_UI設計依頼.md                        │    │
│  │  ├── DeepSeek_検索最適化依頼.md                  │    │
│  │  └── Grok_市場戦略依頼.md                        │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │  30_MEMORY_SHINSEN/Band_A_実装/ (回答格納)      │    │
│  │  ├── 倫理ゲートv1.0_仕様書_Claude.md             │    │
│  │  ├── 原因マップUI_Gemini.md                      │    │
│  │  ├── ハイブリッド検索v1.0_DeepSeek.md            │    │
│  │  └── 市場戦略_Grok.md                            │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │  📊REPORTS/ (統合レポート)                       │    │
│  │  └── 第8ラウンド_完全統合_v2.0.md                │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │  00_CORE/TRIHEXPHI.md (共通情報・最新版)        │    │
│  └────────────────────────────────────────────────┘    │
└─────────────┬───────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────────────────┐
│          GitHub Discussions (6AI合議の場)               │
│  ┌────────────────────────────────────────────────┐    │
│  │  📌 第8ラウンド本編：真の原因AI設計              │    │
│  │    💬 GPT-5: 統合レポート完成しました             │    │
│  │    💬 Claude: 倫理ゲート仕様書提出しました        │    │
│  │    💬 Gemini: UI設計完成、レビュー依頼           │    │
│  │    💬 DeepSeek: ベンチマーク設計提出              │    │
│  │    💬 Grok: 市場リスク3点警告                     │    │
│  │    💬 Cursor: 実装完了、テスト通過                │    │
│  └────────────────────────────────────────────────┘    │
└─────────────┬───────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────────────────┐
│          GitHub Actions (自動化ワークフロー)            │
│  ┌────────────────────────────────────────────────┐    │
│  │  ⚙️ collect-ai-responses.yml                    │    │
│  │    - 各AIの回答ファイルを検出                     │    │
│  │    - 統合レポート生成（Cursorテンプレート）       │    │
│  │    - Discussionsに通知                           │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │  ⚙️ sync-trihexphi.yml                          │    │
│  │    - TRIHEXPHI.md更新時に全AIに通知              │    │
│  │    - Obsidian ↔ Supabase 同期                   │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │  ⚙️ round-complete.yml                          │    │
│  │    - ラウンド完了時の自動処理                     │    │
│  │    - 次ラウンド準備                              │    │
│  └────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

---

## 🔧 実装：GitHub Discussions 設定

### カテゴリ設計

| カテゴリ | 用途 | 管理者 |
|---------|------|--------|
| **🔱 完璧軍議** | ラウンドごとの6AI合議 | GPT-5 |
| **📤 タスク送付** | 各AIへのタスク指示 | Cursor, しりゅう |
| **📊 統合レポート** | ラウンド完了時の統合報告 | GPT-5 |
| **🚀 実装進捗** | Cursorの実装状況 | Cursor |
| **🐛 問題報告** | エラー・ブロッカー | 全AI |
| **💡 提案** | 改善アイデア | 全AI |

### Discussionテンプレート

#### 例：第8ラウンド本編

```markdown
# 🔱 第8ラウンド本編：真の原因AI設計

## 📋 タスクサマリー
- **期限**: 2025-10-29 23:59
- **優先度**: 最高（Band A）
- **目的**: MVP v1.0 設計完了

## 🎯 各AIへのタスク
- [ ] Claude: 倫理ゲートv1.0 仕様書
- [ ] Gemini: 原因マップUI & 作戦室パネル
- [ ] DeepSeek: ハイブリッド検索v1.0 設計
- [ ] Grok: 市場戦略 & 赤旗検知
- [ ] Cursor: 実装（Band A）
- [ ] GPT-5: 統合レビュー

## 📂 関連ファイル
- タスク送付: `/📤Round3_全AI送付用/`
- 回答格納: `/30_MEMORY_SHINSEN/Band_A_実装/`
- 統合レポート: `/📊REPORTS/第8ラウンド_完全統合_v2.0.md`

## 💬 進行状況
各AIは完了時にここにコメントしてください。

---

### Claude（倫理ゲート）
- [ ] 倫理ゲートv1.0_仕様書_Claude.md 提出
- [ ] UCLA/PsyCap測定導線_Claude.md 提出

### Gemini（UI/UX）
- [ ] 原因マップUI_ワイヤーフレーム_Gemini.md 提出
- [ ] 作戦室パネル_ワイヤーフレーム_Gemini.md 提出

### DeepSeek（最適化）
- [ ] ハイブリッド検索v1.0_設計書_DeepSeek.md 提出
- [ ] 精度_性能ベンチマーク設計_DeepSeek.md 提出

### Grok（市場戦略）
- [ ] 市場戦略_GTM_Grok.md 提出
- [ ] 赤旗検知ルール_Grok.md 提出

### Cursor（実装）
- [ ] Band A実装完了
- [ ] テスト通過

### GPT-5（統治）
- [ ] 全AI回答レビュー
- [ ] 統合レポート作成
```

---

## 🔧 実装：GitHub Actions ワークフロー

### 1. AI回答収集ワークフロー

```yaml
# .github/workflows/collect-ai-responses.yml

name: 🤖 AI回答収集・統合レポート生成

on:
  push:
    paths:
      - '30_MEMORY_SHINSEN/Band_A_実装/**/*.md'
  workflow_dispatch:

jobs:
  collect-and-integrate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: AI回答ファイル検出
        id: detect
        run: |
          FILES=$(find 30_MEMORY_SHINSEN/Band_A_実装 -name "*.md" -mtime -1)
          echo "新規回答: $FILES"
          echo "files=$FILES" >> $GITHUB_OUTPUT

      - name: 統合レポート生成
        run: |
          # Markdownテンプレートを使用して統合レポート生成
          bash scripts/generate-integration-report.sh

      - name: Discussionsに通知
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh api \
            --method POST \
            -H "Accept: application/vnd.github+json" \
            /repos/${{ github.repository }}/discussions/comments \
            -f body='🤖 新しいAI回答を検出しました。統合レポートを更新しました。'
```

### 2. TRIHEXPHI.md 同期ワークフロー

```yaml
# .github/workflows/sync-trihexphi.yml

name: 📜 TRIHEXPHI.md 同期通知

on:
  push:
    paths:
      - '00_CORE/TRIHEXPHI.md'

jobs:
  notify-ais:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: 変更内容抽出
        id: diff
        run: |
          git diff HEAD^ HEAD -- 00_CORE/TRIHEXPHI.md > trihexphi-diff.txt

      - name: Discussionsに通知
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh api \
            --method POST \
            -H "Accept: application/vnd.github+json" \
            /repos/${{ github.repository }}/discussions/comments \
            -f body="📜 **TRIHEXPHI.md が更新されました**

          全AIは最新版を参照してください。

          更新内容:
          \`\`\`diff
          $(cat trihexphi-diff.txt)
          \`\`\`"
```

### 3. ラウンド完了ワークフロー

```yaml
# .github/workflows/round-complete.yml

name: ✅ ラウンド完了処理

on:
  workflow_dispatch:
    inputs:
      round_number:
        description: 'ラウンド番号（例: 8）'
        required: true
      round_title:
        description: 'ラウンドタイトル（例: 真の原因AI設計）'
        required: true

jobs:
  complete-round:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: 統合レポート生成
        run: |
          bash scripts/finalize-round.sh ${{ inputs.round_number }}

      - name: 次ラウンド準備
        run: |
          NEXT_ROUND=$((inputs.round_number + 1))
          mkdir -p "30_MEMORY_SHINSEN/第${NEXT_ROUND}ラウンド_回答"
          echo "# 第${NEXT_ROUND}ラウンド準備完了" > "30_MEMORY_SHINSEN/第${NEXT_ROUND}ラウンド_回答/README.md"

      - name: Discussionsでラウンド完了宣言
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh api \
            --method POST \
            -H "Accept: application/vnd.github+json" \
            /repos/${{ github.repository }}/discussions \
            -f title="✅ 第${{ inputs.round_number }}ラウンド完了：${{ inputs.round_title }}" \
            -f body="六大将軍の皆様、お疲れ様でした。

          第${{ inputs.round_number }}ラウンドが完了しました。

          統合レポート: [こちら](/📊REPORTS/)

          次は第$((inputs.round_number + 1))ラウンドです。"
```

---

## 🔧 実装：共通情報管理

### TRIHEXPHI.md の位置づけ

- **唯一の真実（Single Source of Truth）**
- 全AIが参照すべき最新情報
- 更新時は自動通知（GitHub Actions）

### 格納情報
- 六大将軍の役割定義
- 現在のラウンド状況
- 実装優先度（Band A/B/C/D）
- 重要な意思決定ログ
- KPI目標値

---

## 📋 実装チェックリスト

### Phase 1: GitHub Discussions 設定（30分）
- [ ] Discussionsを有効化
- [ ] カテゴリ作成（6つ）
- [ ] テンプレート作成
- [ ] 第8ラウンド用Discussionを作成

### Phase 2: GitHub Actions 実装（2時間）
- [ ] `collect-ai-responses.yml` 作成
- [ ] `sync-trihexphi.yml` 作成
- [ ] `round-complete.yml` 作成
- [ ] スクリプト作成（`scripts/generate-integration-report.sh`）
- [ ] テスト実行

### Phase 3: ディレクトリ整理（30分）
- [ ] `30_MEMORY_SHINSEN/Band_A_実装/` 作成
- [ ] `Scripts/` 整理
- [ ] README.md 更新

### Phase 4: 運用テスト（1時間）
- [ ] ダミーAI回答を格納してワークフロー動作確認
- [ ] TRIHEXPHI.md更新時の通知確認
- [ ] Discussion投稿テスト

---

## 🎯 次のアクション（しりゅう承認後）

1. **Grokへのタスク送付文書作成**（市場戦略・赤旗検知）
2. **GitHub Discussions有効化**（リポジトリ設定）
3. **GitHub Actions実装**（ワークフロー3本）
4. **第8ラウンドDiscussion作成**（6AIが集まる場所）
5. **各AIにタスク送付**（Discussionsリンク付き）

---

## 💬 しりゅうへの確認

この設計で進めてOKでしょうか？

特に：
- **GitHub Discussions**: 6AIの合議の場として機能するか？
- **GitHub Actions**: 自動化の範囲は適切か？
- **ディレクトリ構造**: 回答格納場所は明確か？

承認いただければ、即実装に移ります！

