name: Auto Ops (kick Mirror Gate)

on:
  workflow_dispatch:
    inputs:
      pr:
        description: "PR number"
        required: false
        default: "34"
      workflow_file:
        description: "Mirror workflow file"
        required: false
        default: ".github/workflows/mirror_gate.yml"
      dry_run:
        description: "dry_run true/false"
        required: false
        default: "true"

jobs:
  auto-ops:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '20' }
      - name: Run auto ops
        run: |
          node -v
          node tools/ai_auto_ops.mjs --pr "${{ github.event.inputs.pr }}" \
            --workflow "${{ github.event.inputs.workflow_file }}" \
            --dry "${{ github.event.inputs.dry_run }}"
