name: Mirror Gate (dispatch test)
on:
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Dry run (true/false)'
        required: false
        default: 'true'
jobs:
  mirror:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v4
      
      - name: Build mirror tree (simple test)
        run: |
          mkdir -p mirror
          echo "Testing rsync..."
          rsync --version || echo "rsync not found"
          echo "OK: rsync available"
      
      - name: Dry-run listing
        run: |
          echo "---- DRY RUN ----"
          ls -la mirror/ || echo "mirror directory empty"
          echo "---- END ----"
