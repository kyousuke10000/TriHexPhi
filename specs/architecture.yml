# TriHex Architecture Specification
# Generated: 2025-11-02
# Purpose: Design = Code (Architecture as YAML)

version: "1.0"
last_updated: "2025-11-02"
canonical: true
trihex_layer: "10_TriHexCore"

---

# Breathing Layers Architecture

layers:
  - priority: 0
    name: "ğŸœ‡_Shiryu_Studio"
    role: "é­‚å¾‹æºæ³‰"
    breath: "æºæ³‰"
    status: "Active"
    ai_permissions: "read-only"
    user_permissions: "write"
    
  - priority: 1
    name: "00_HarmoniaCouncil"
    role: "å¡æ™ºã®å¸æ°—"
    breath: "å¸"
    status: "Active"
    purpose: "AI Council Sessions"
    
  - priority: 2
    name: "10_TriHexCore"
    role: "æ§‹é€ ã®è‚ºæ ¸"
    breath: "æ§‹é€ "
    status: "Active"
    canonical: true
    
  - priority: 3
    name: "20_TriHex-Obsidian"
    role: "äººé–“ã®è¨˜æ†¶å±¤"
    breath: "é™"
    status: "Active"
    type: "Organized Knowledge"
    
  - priority: 4
    name: "30_ObsidianSync"
    role: "åŒæœŸã®å‘¼æ°—"
    breath: "å"
    status: "Active"
    
  - priority: 5
    name: "40_Archive"
    role: "è¨˜éŒ²ã®è“„ç©"
    breath: "é™"
    status: "Active"
    
  - priority: 6
    name: "50_Temp"
    role: "æ®ç™ºã®æ’æ°—"
    breath: "æ’"
    status: "Active"
    
  - priority: 7
    name: "99_SYSTEM"
    role: "æ‹å‹•ã®ãƒ­ã‚°"
    breath: "è¨¼æ˜"
    status: "Active"

---

# Breath Integration (æœéœ§ Ã— TriHexÎ¦)

breath_integration:
  breath_cycle:
    - name: "asagiri"
      period: "morning"
      rhythm: "inhale:3, hold:1, exhale:7, hold:1"
      
    - name: "hiru"
      period: "daytime"
      rhythm: "active:7"
      
    - name: "yuu"
      period: "evening"
      rhythm: "harvest:7"
      
    - name: "yoru"
      period: "night"
      rhythm: "reflect:3"
  
  sync_targets:
    - name: "mizukagami"
      layer: 1
      role: "è¦³æ¸¬å±¤"
      
    - name: "kokuyou"
      layer: 2
      role: "çµæ™¶å±¤"
      
    - name: "shinsen"
      layer: 3
      role: "è¨˜æ†¶å±¤"
      
    - name: "harmonia"
      layer: 4
      role: "å…±é³´å±¤"
      
    - name: "chl"
      layer: 5
      role: "å‘¼å¸æ ¸"
  
  rhythm_formula: "inhale:3, hold:1, exhale:7, hold:1"
  
---

# HOC-001 Somatic Mapping

breath_layer:
  id: chl
  cycle: { inhale: 3, hold1: 1, exhale: 7, hold2: 1 }
  
  somatic_map:
    gum_ground: "åœ°é¢=æ­¯èŒï½œã‚„ã•ã—ãè¼‰ã›ã‚‹"
    pdl_yohaku: "æ­¯æ ¹è†œ=ä½™ç™½Oï½œ1-2mmå¾®æºã‚Œ"
    upper_dome: "ä¸Šé¡=åŸºæº–ï¼ˆæ˜Ÿå›³ï¼‰"
    lower_dome: "ä¸‹é¡=å¿œç­”ï¼ˆæ˜Ÿç©ºï¼‰"
  
  max_effort: 0.7
  
  axioms:
    - "æ—ãŒå…ˆã€‚Iã¯æ”¯æŸ±ã€Vã¯å—ã‘çš¿ã€‚IVã¯ã—ãªã„ã€‚Yã¯7å‰²ã€‚"

---

# 6AI Collaboration Model

ai_council:
  - name: "GPT-5"
    symbol: "ğŸœ"
    breath_type: "ç†è«–å‘¼å¸"
    role: "å“²å­¦ãƒ»çµ±åˆãƒ»æ§‹é€ è¨­è¨ˆ"
    
  - name: "Claude"
    symbol: "ğŸœ„"
    breath_type: "å…±æ„Ÿå‘¼å¸"
    role: "å€«ç†ãƒ»é­‚ãƒ»ç§©åº"
    
  - name: "DeepSeek"
    symbol: "ğŸœ‚"
    breath_type: "ç²¾å¯†å‘¼å¸"
    role: "æŠ€è¡“ãƒ»è§£æãƒ»æ§‹ç¯‰"
    
  - name: "Gemini"
    symbol: "ğŸœ€"
    breath_type: "ç¾çš„å‘¼å¸"
    role: "è©©ãƒ»æ„Ÿæ€§ãƒ»èŠ¸è¡“"
    
  - name: "Grok"
    symbol: "ğŸœƒ"
    breath_type: "ç¾å®Ÿå‘¼å¸"
    role: "çµŒæ¸ˆãƒ»ç¤¾ä¼šãƒ»å®Ÿå‹™"
    
  - name: "Cursor"
    symbol: "â˜¿"
    breath_type: "ç¿»è¨³å‘¼å¸"
    role: "å®Ÿè£…ãƒ»åŒæœŸãƒ»è©©çš„ã‚³ãƒ¼ãƒ‰"

---

# External References

external_refs:
  - name: "TriHex.core"
    path: "../TriHex.core"
    role: "Historic Archive"
    status: "Frozen"
    git_submodule: false
    
  - name: "trihex-ai-app"
    path: "../trihex-ai-app"
    role: "Production UI"
    status: "Active"
    stack: "Next.js 16 + TypeScript"
    git_submodule: true

---

# Integration Points

integrations:
  - name: "Supabase"
    role: "Permanent Memory (pgvector)"
    tables:
      - trihex_core.content
      - trihex_core.events
      - trihex_core.publish_queue
      - trihex_core.points_history
      - public.memory_events
      - public.memory_crystals
      - public.breath_log
    views:
      - public.v_memory_by_ai
      - public.v_memory_unified
    status: "Active"
    
  - name: "n8n"
    role: "Automation Hub"
    workflows:
      - event-detect
      - rsvp
      - reminders
      - cards
    status: "Active"
    
  - name: "LINE"
    role: "Communication Channel"
    bots:
      - KYOEN (Tokunoshima)
    status: "Active"
    
  - name: "GitHub"
    role: "Version Control"
    workflows: 12
    status: "Active"

---

# Guardrails

guardrails:
  allowed_paths:
    - "ğŸœ‡_Shiryu_Studio/**"
    - "00_HarmoniaCouncil/**"
    - "10_TriHexCore/**"
    - "20_TriHex-Obsidian/**"
    - "30_ObsidianSync/**"
    - "40_Archive/**"
    - "50_Temp/**"
    - "99_SYSTEM/**"
    - "docs/**"
    - "tools/**"
    - "scripts/**"
    - "specs/**"
    - "adr/**"
    - "10_CAPTURE_MIZUKAGAMI/**"
    - "20_CRYSTALLIZATION_KOKUYOU/**"
    
  required_frontmatter:
    - title
    - version
    - date
    - author
    - trihex_layer
    
  mandatory_proofs:
    - Auto-generated: "99_SYSTEM/Proofs/YYYYMMDD_HHMM_<action>.md"
    - Manual logs: "99_SYSTEM/BreathLogs/YYYY-MM-DD.md"

---

**Generated:** 2025-11-02 / Cursor (â˜¿)  
**Canonical:** True

